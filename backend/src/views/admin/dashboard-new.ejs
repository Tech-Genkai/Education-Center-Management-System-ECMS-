<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ========================================
         ADMIN DASHBOARD - MAIN FILE
         This file includes all modular components
         ======================================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ECMS</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    
    <!-- Custom Styles and Scripts -->
    <script src="/static/js/dark-mode.js"></script>
    <link rel="stylesheet" href="/static/css/shared-styles.css">
    
    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Socket.IO Client for Real-time Updates -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    
    <!-- Custom Styles -->
    <style>
        [x-cloak] { display: none !important; }
        .sidebar-scrollbar::-webkit-scrollbar { width: 6px; }
        .sidebar-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .sidebar-scrollbar::-webkit-scrollbar-thumb { background: #4B5563; border-radius: 3px; }
        .sidebar-scrollbar::-webkit-scrollbar-thumb:hover { background: #6B7280; }
    </style>
    
    <!-- ========================================
         HEAD SCRIPTS
         Alpine.js config and initial functions
         ======================================== -->
    <%- include('./partials/admin/scripts/head-scripts') %>
    
    <!-- Alpine.js for Reactive UI -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="bg-stone-50 dark:bg-gray-900 text-gray-900 dark:text-white" x-data="dashboard()">
    
    <!-- ========================================
         SIDEBAR NAVIGATION
         ======================================== -->
    <%- include('./partials/admin/sidebar') %>

    <!-- ========================================
         MAIN CONTENT AREA
         ======================================== -->
    <div :class="sidebarOpen ? 'ml-64' : 'ml-20'" class="transition-all duration-300">
        
        <!-- ========================================
             HEADER/TOPBAR
             ======================================== -->
        <%- include('./partials/admin/header') %>

        <!-- ========================================
             MAIN CONTENT TABS
             ======================================== -->
        <main class="p-6">
            
            <!-- Dashboard Overview Tab -->
            <div x-show="activeTab === 'dashboard'" x-cloak>
                <%- include('./partials/admin/tabs/dashboard-overview') %>
            </div>

            <!-- Profile Tab -->
            <div x-show="activeTab === 'profile'" x-cloak>
                <%- include('./partials/admin/tabs/profile') %>
            </div>

            <!-- Students Management Tab -->
            <div x-show="activeTab === 'students'" x-cloak>
                <%- include('./partials/admin/tabs/students') %>
            </div>

            <!-- Teachers Management Tab -->
            <div x-show="activeTab === 'teachers'" x-cloak>
                <%- include('./partials/admin/tabs/teachers') %>
            </div>

            <!-- Admins Management Tab -->
            <div x-show="activeTab === 'admins'" x-cloak>
                <%- include('./partials/admin/tabs/admins') %>
            </div>

            <!-- Classes Management Tab -->
            <div x-show="activeTab === 'classes'" x-cloak>
                <%- include('./partials/admin/tabs/classes') %>
            </div>

            <!-- Subjects Management Tab -->
            <div x-show="activeTab === 'subjects'" x-cloak>
                <%- include('./partials/admin/tabs/subjects') %>
            </div>

            <!-- Settings Tab -->
            <div x-show="activeTab === 'settings'" x-cloak>
                <%- include('./partials/admin/tabs/settings') %>
            </div>

        </main>
    </div>

    <!-- ========================================
         MODALS
         All modal dialogs for CRUD operations
         ======================================== -->
    
    <!-- Student Add/Edit Modal -->
    <%- include('./partials/admin/modals/student-modal') %>

    <!-- Teacher Add/Edit Modal -->
    <%- include('./partials/admin/modals/teacher-modal') %>

    <!-- Admin Add/Edit Modal -->
    <%- include('./partials/admin/modals/admin-modal') %>

    <!-- Class Add Modal -->
    <%- include('./partials/admin/modals/class-modal') %>

    <!-- Subject Add Modal -->
    <%- include('./partials/admin/modals/subject-modal') %>

    <!-- Password Reset Modal -->
    <%- include('./partials/admin/modals/password-reset-modal') %>

    <!-- ========================================
         JAVASCRIPT FUNCTIONALITY
         All scripts organized by functionality
         ======================================== -->
    
    <!-- Data Loading Functions -->
    <%- include('./partials/admin/scripts/data-loaders') %>

    <!-- Form Submission Handlers -->
    <%- include('./partials/admin/scripts/form-handlers') %>

    <!-- Profile Management -->
    <%- include('./partials/admin/scripts/profile-handlers') %>

    <!-- User Management (Delete, Toggle Status, etc.) -->
    <%- include('./partials/admin/scripts/user-management') %>

    <!-- Socket.IO and Initialization -->
    <%- include('./partials/admin/scripts/socket-and-init') %>

</body>
</html>
